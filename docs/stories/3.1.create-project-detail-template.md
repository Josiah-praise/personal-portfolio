# Story 3.1: Create Project Detail Page Template

## Status
Ready for Review

## Story

**As a** developer,
**I want** a reusable template for project detail pages,
**so that** each project case study has consistent structure and formatting.

## Acceptance Criteria

1. Project detail page component/template created with sections: Overview, Problem, Solution, Technologies, Features, Results, Links
2. Template accepts project data as props or from content file
3. Layout is responsive and maintains readability across devices
4. Typography hierarchy guides reader through case study narrative
5. Template includes sections for multiple images/screenshots
6. Template deployed and accessible via dynamic route (e.g., /projects/[slug])
7. At least one project rendered using template to validate structure

## Tasks / Subtasks

- [x] Create MDX content system for projects (AC: 2)
  - [x] Install MDX dependencies: `npm install gray-matter next-mdx-remote`
  - [x] Create `lib/content/projects.ts` utility file
  - [x] Implement `getProjectBySlug(slug)` function to load MDX file
  - [x] Implement `getAllProjects()` function to load all MDX files
  - [x] Implement `getFeaturedProjects()` function for homepage
  - [x] Parse frontmatter with gray-matter
  - [x] Compile MDX content with next-mdx-remote

- [x] Create project MDX template structure (AC: 1, 2)
  - [x] Create directory: `content/projects/`
  - [x] Create template file: `content/projects/_template.mdx`
  - [x] Define frontmatter schema matching Project interface from data models
  - [x] Add markdown sections: ## Problem, ## Solution, ## Key Features, ## Technologies Used, ## Results
  - [x] Include placeholder content for each section
  - [x] Document frontmatter fields in comments

- [x] Create first sample project MDX file (AC: 7)
  - [x] Create `content/projects/sample-project.mdx`
  - [x] Use slug: "sample-project"
  - [x] Fill frontmatter with sample data:
    - [x] title, description, featured, order, category
    - [x] technologies array, startDate, endDate
    - [x] thumbnail path, images array
    - [x] Optional: demoUrl, githubUrl
  - [x] Write sample content for each section (can be placeholder text)

- [x] Create ProjectDetail page component (AC: 1, 3, 4, 6)
  - [x] Already exists: `app/projects/[slug]/page.tsx` (created in Story 2.3 as placeholder)
  - [x] Update to use MDX content system
  - [x] Implement `generateStaticParams()` for static generation
  - [x] Load project data using `getProjectBySlug(params.slug)`
  - [x] Define page structure with semantic HTML
  - [x] Add page metadata (title, description) dynamically

- [x] Create ProjectHeader component (AC: 1, 4)
  - [x] Create `components/project/project-header.tsx`
  - [x] Display project title (h1)
  - [x] Display project description/tagline
  - [x] Display project metadata: category, date range
  - [x] Display technology tags
  - [x] Style with clear typography hierarchy
  - [x] Make responsive (mobile and desktop layouts)

- [x] Create ProjectContent component for MDX rendering (AC: 1, 2, 5)
  - [x] Create `components/project/project-content.tsx`
  - [x] Import MDXRemote from next-mdx-remote
  - [x] Render compiled MDX content: `<MDXRemote {...content} />`
  - [x] Apply prose styles for readable typography
  - [x] Add custom components for MDX (optional): custom headings, links, etc.

- [x] Create ProjectImages component (AC: 5)
  - [x] Create `components/project/project-images.tsx`
  - [x] Accept images array prop
  - [x] Display images in grid layout (2 columns on desktop, 1 on mobile)
  - [x] Use Next.js Image component for each image
  - [x] Add aspect-ratio containers to prevent layout shift
  - [x] Include image captions (optional for this story, detailed in Story 3.3)

- [x] Create ProjectLinks component (AC: 1)
  - [x] Create `components/project/project-links.tsx`
  - [x] Display "View Live Demo" button (if demoUrl exists)
  - [x] Display "View Source Code" button (if githubUrl exists)
  - [x] Use Button component from shadcn/ui
  - [x] Add icons (ExternalLink, Github from Lucide)
  - [x] Open links in new tab with security attributes
  - [x] Note: Full implementation in Story 3.4, basic structure here

- [x] Implement project detail page layout (AC: 1, 3, 4)
  - [x] Update `app/projects/[slug]/page.tsx` to use all components
  - [x] Layout structure:
    ```tsx
    <article>
      <ProjectHeader project={project} />
      <ProjectImages images={project.images} />
      <ProjectContent content={project.content} />
      <ProjectLinks demoUrl={project.demoUrl} githubUrl={project.githubUrl} />
    </article>
    ```
  - [x] Add container with max-width: `container mx-auto px-4 py-12`
  - [x] Add spacing between sections: `space-y-12`

- [x] Style with typography and responsive design (AC: 3, 4)
  - [x] Apply prose styles to MDX content: `prose prose-lg md:prose-xl max-w-none`
  - [x] Install @tailwindcss/typography: `npm install @tailwindcss/typography`
  - [x] Add to tailwind.config.ts: `plugins: [require('@tailwindcss/typography')]`
  - [x] Customize prose theme to match shadcn/ui colors
  - [x] Test responsive layout at all breakpoints

- [x] Implement generateStaticParams for static generation (AC: 6)
  - [x] In `app/projects/[slug]/page.tsx`, export generateStaticParams:
    ```tsx
    export async function generateStaticParams() {
      const projects = await getAllProjects();
      return projects.map((project) => ({
        slug: project.slug,
      }));
    }
    ```
  - [x] Verify static generation works: `npm run build`

- [x] Test with sample project (AC: 7)
  - [x] Run `npm run dev`
  - [x] Navigate to Projects page
  - [x] Click sample project card
  - [x] Verify project detail page loads
  - [x] Verify all sections display correctly
  - [x] Test responsive layout on mobile and desktop

- [x] Deploy and verify live (AC: 6, 7)
  - [x] Commit changes: `git add .` and `git commit -m "Add project detail page template with MDX content system"`
  - [x] Push to main: `git push origin main`
  - [x] Verify Vercel deployment succeeds
  - [x] Test sample project page on production URL
  - [x] Verify static generation works (fast page load)

## Dev Notes

### Previous Story Insights
[From Stories 2.3]
- Projects grid created with ProjectCard components
- Placeholder project detail pages exist at `app/projects/[slug]/page.tsx`
- Project data structure defined but using mock data
- Ready to implement full MDX content system

### Data Models Requirements
[Source: [data-models.md#project](docs/architecture/data-models.md)]

**Project Interface:**
```typescript
export interface ProjectFrontmatter {
  title: string;
  slug: string;
  description: string;
  featured: boolean;
  order: number;
  technologies: string[];
  category: 'Frontend' | 'Full-Stack' | 'Backend' | 'Mobile' | 'DevOps';
  startDate: string; // YYYY-MM
  endDate: string | 'Present';
  demoUrl?: string;
  githubUrl?: string;
  thumbnail: string;
  images: string[];
}

export interface Project extends ProjectFrontmatter {
  content: MDXRemoteSerializeResult;
}
```

### MDX Content System Architecture
[Source: [components.md#mdx-content-system](docs/architecture/components.md)]

**MDX System Responsibilities:**
- Load and parse MDX project files at build time
- Extract frontmatter metadata
- Compile MDX content for rendering
- Provide getAllProjects(), getProjectBySlug(), getFeaturedProjects()

**Dependencies:**
- gray-matter: Parse frontmatter
- next-mdx-remote: Compile and render MDX
- TypeScript schemas for type safety

### Project Content Structure
[Source: [unified-project-structure.md](docs/architecture/unified-project-structure.md)]

**Content Directory:**
```
content/
├── projects/
│   ├── _template.mdx        # Template with all sections
│   ├── sample-project.mdx    # Sample for testing
│   └── ...                   # Future project files
```

**MDX File Structure:**
```mdx
---
title: "Project Title"
slug: "project-slug"
description: "One-sentence description"
featured: true
order: 1
technologies: ["Next.js", "TypeScript", "PostgreSQL"]
category: "Full-Stack"
startDate: "2024-01"
endDate: "2024-06"
demoUrl: "https://example.com"
githubUrl: "https://github.com/user/repo"
thumbnail: "/images/projects/slug/thumbnail.webp"
images: [
  "/images/projects/slug/screenshot-1.webp",
  "/images/projects/slug/screenshot-2.webp"
]
---

## Problem

Description of the problem or challenge...

## Solution

How you approached solving the problem...

## Key Features

- Feature 1
- Feature 2
- Feature 3

## Technologies Used

Explanation of tech stack choices and rationale...

## Results

Outcomes, metrics, learnings...
```

### MDX Loading Utilities

**lib/content/projects.ts Implementation:**
```typescript
import fs from 'fs';
import path from 'path';
import matter from 'gray-matter';
import { serialize } from 'next-mdx-remote/serialize';
import type { Project, ProjectFrontmatter } from '@/lib/types';

const projectsDirectory = path.join(process.cwd(), 'content/projects');

export async function getProjectBySlug(slug: string): Promise<Project> {
  const filePath = path.join(projectsDirectory, `${slug}.mdx`);
  const fileContents = fs.readFileSync(filePath, 'utf8');
  const { data, content } = matter(fileContents);
  const mdxContent = await serialize(content);

  return {
    ...(data as ProjectFrontmatter),
    content: mdxContent,
  };
}

export async function getAllProjects(): Promise<ProjectFrontmatter[]> {
  const fileNames = fs.readdirSync(projectsDirectory);
  const projects = fileNames
    .filter((fileName) => fileName.endsWith('.mdx') && !fileName.startsWith('_'))
    .map((fileName) => {
      const slug = fileName.replace(/\.mdx$/, '');
      const filePath = path.join(projectsDirectory, fileName);
      const fileContents = fs.readFileSync(filePath, 'utf8');
      const { data } = matter(fileContents);
      return data as ProjectFrontmatter;
    });

  return projects.sort((a, b) => a.order - b.order);
}

export async function getFeaturedProjects(): Promise<ProjectFrontmatter[]> {
  const allProjects = await getAllProjects();
  return allProjects.filter((project) => project.featured);
}
```

### Component Architecture
[Source: [frontend-architecture.md#component-organization](docs/architecture/frontend-architecture.md)]

**Component Locations:**
- ProjectHeader: `components/project/project-header.tsx`
- ProjectContent: `components/project/project-content.tsx`
- ProjectImages: `components/project/project-images.tsx`
- ProjectLinks: `components/project/project-links.tsx`
- Project detail page: `app/projects/[slug]/page.tsx`

### Typography with Tailwind Prose
[Source: [tech-stack.md](docs/architecture/tech-stack.md)]

**@tailwindcss/typography Plugin:**
- Install: `npm install @tailwindcss/typography`
- Adds prose classes for beautiful typography
- Use: `<div className="prose prose-lg">...MDX content...</div>`

**Prose Customization:**
```js
// tailwind.config.ts
module.exports = {
  plugins: [require('@tailwindcss/typography')],
  theme: {
    extend: {
      typography: {
        DEFAULT: {
          css: {
            '--tw-prose-body': 'var(--foreground)',
            '--tw-prose-headings': 'var(--foreground)',
            // ... customize to match shadcn/ui theme
          },
        },
      },
    },
  },
};
```

### Static Generation with generateStaticParams
[Source: [frontend-architecture.md#routing-architecture](docs/architecture/frontend-architecture.md)]

**Dynamic Route Static Generation:**
```tsx
// app/projects/[slug]/page.tsx
export async function generateStaticParams() {
  const projects = await getAllProjects();
  return projects.map((project) => ({
    slug: project.slug,
  }));
}

export default async function ProjectPage({ params }: { params: { slug: string } }) {
  const project = await getProjectBySlug(params.slug);
  return <>{/* Render project */}</>;
}
```

### Coding Standards
[Source: [coding-standards.md](docs/architecture/coding-standards.md)]

**Type Safety:**
- All project data typed with Project interface
- MDX utilities have proper TypeScript types
- Component props interfaces defined

**Server Components:**
- Project detail page is server component (async, loads data at build time)
- MDX content loaded server-side for optimal performance

### Testing

[Source: [testing-strategy.md](docs/architecture/testing-strategy.md)]

**Testing Requirements for this Story:**
- Manual verification:
  - Sample project loads correctly
  - All sections display as expected
  - Responsive layout works
  - Typography is readable
  - Static generation works (fast page load)
- Build test: `npm run build` succeeds
- Future: Component tests for ProjectHeader, ProjectContent, etc.

### Accessibility Requirements

**WCAG Compliance:**
- Semantic HTML (article, sections, headings)
- Proper heading hierarchy (h1 → h2 → h3)
- Alt text for images (implemented in ProjectImages)
- Color contrast for prose content
- Keyboard navigable links

### Image Organization
[Source: [unified-project-structure.md](docs/architecture/unified-project-structure.md)]

**Project Images Structure:**
```
public/
├── images/
│   └── projects/
│       ├── sample-project/
│       │   ├── thumbnail.webp
│       │   ├── screenshot-1.webp
│       │   ├── screenshot-2.webp
│       │   └── screenshot-3.webp
│       └── ...
```

### Integration with Previous Stories

**Dependencies:**
- Story 2.3: Projects grid links to detail pages
- Story 2.7: Image optimization principles apply
- Story 1.4: shadcn/ui components (Button for links)

### Integration with Future Stories

This template provides foundation for:
- Story 3.2: First project case study content
- Story 3.3: Image gallery implementation
- Story 3.4: Live demo and repo links
- Story 3.5: Remaining project case studies

### Technical Constraints

**MDX File Processing:**
- Happens at build time (static generation)
- No runtime MDX compilation (optimal performance)
- All projects pre-rendered to HTML

**Vercel Build:**
- MDX files included in deployment
- Gray-matter and next-mdx-remote run during build
- Static pages cached on Edge Network

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-02 | 1.0 | Initial story draft created | Scrum Master (Bob) |

## Dev Agent Record

### Agent Model Used

Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References

- Installed MDX dependencies (gray-matter, next-mdx-remote)
- Fixed MDXRemote React hooks error by using next-mdx-remote/rsc
- Added Badge component from shadcn/ui
- Configured @tailwindcss/typography plugin in globals.css
- Build passed with static generation for sample project

### Completion Notes List

- Created MDX content system with utilities (getProjectBySlug, getAllProjects, getFeaturedProjects, getAllProjectSlugs)
- Created type definitions for ProjectFrontmatter and Project interfaces
- Created MDX template file with comprehensive frontmatter schema
- Created sample project MDX file with realistic content
- Built ProjectHeader component with category badge, tech tags, and date formatting
- Built ProjectContent component using next-mdx-remote/rsc for RSC support
- Built ProjectImages component with responsive grid layout
- Built ProjectLinks component with demo and GitHub buttons
- Configured @tailwindcss/typography with prose classes
- Updated project detail page to use MDX system with async components
- Static generation working correctly (sample-project pre-rendered)
- Used next-mdx-remote/rsc instead of next-mdx-remote for App Router compatibility

### File List

- lib/types/project.ts - Type definitions for Project and ProjectFrontmatter
- lib/content/projects.ts - MDX loading utilities
- content/projects/_template.mdx - Template for new projects
- content/projects/sample-project.mdx - Sample project for testing
- components/project/project-header.tsx - Project header component
- components/project/project-content.tsx - MDX rendering component
- components/project/project-images.tsx - Project images grid
- components/project/project-links.tsx - Demo and GitHub links
- components/ui/badge.tsx - Badge component (shadcn/ui)
- app/projects/[slug]/page.tsx - Updated project detail page
- app/globals.css - Added @tailwindcss/typography plugin

## QA Results

*This section will be populated by QA Agent after story completion*
