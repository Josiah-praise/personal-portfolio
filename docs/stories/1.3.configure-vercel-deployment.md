# Story 1.3: Configure Vercel Deployment Pipeline

## Status
Ready for implementation

## Story

**As a** developer,
**I want** to connect my GitHub repository to Vercel with automatic deployments,
**so that** every commit automatically deploys to a preview or production URL.

## Acceptance Criteria

1. Vercel project created and connected to GitHub repository
2. Automatic deployments configured for main branch (production)
3. Preview deployments enabled for feature branches
4. Custom domain configured (if already purchased) or Vercel subdomain active
5. HTTPS enabled automatically by Vercel
6. Build and deployment succeeds, site accessible at live URL
7. Environment variables configured in Vercel dashboard (if any needed)

## Tasks / Subtasks

- [ ] Create Vercel account and link to GitHub (AC: 1)
  - [ ] Navigate to https://vercel.com and sign up/login with GitHub
  - [ ] Authorize Vercel to access GitHub repositories
  - [ ] Grant necessary permissions to read repository and deploy

- [ ] Import GitHub repository to Vercel (AC: 1)
  - [ ] Click "Add New Project" in Vercel dashboard
  - [ ] Select the Personal-Portfolio repository from GitHub
  - [ ] Verify repository access and permissions

- [ ] Configure project settings (AC: 1, 2)
  - [ ] Verify Framework Preset: Next.js (should auto-detect)
  - [ ] Verify Build Command: `npm run build` or `next build` (auto-configured)
  - [ ] Verify Output Directory: `.next` (auto-detected)
  - [ ] Set Root Directory: `.` (project root)
  - [ ] Verify Node.js Version: 20.x (recommended)

- [ ] Configure deployment settings (AC: 2, 3)
  - [ ] Verify production branch is set to `main`
  - [ ] Confirm automatic deployments enabled for main branch
  - [ ] Verify preview deployments enabled for all other branches
  - [ ] Enable automatic deployment on push (should be default)

- [ ] Configure domain settings (AC: 4, 5)
  - [ ] If custom domain available:
    - [ ] Add custom domain in Vercel Project Settings > Domains
    - [ ] Update DNS records as instructed by Vercel
    - [ ] Verify DNS propagation and SSL certificate issuance
  - [ ] If no custom domain:
    - [ ] Use Vercel subdomain: `<project-name>.vercel.app`
    - [ ] Verify HTTPS is automatically enabled
  - [ ] Confirm domain is accessible and secure (https://)

- [ ] Trigger initial deployment (AC: 6)
  - [ ] Click "Deploy" in Vercel dashboard (or push new commit to trigger)
  - [ ] Monitor build logs in Vercel dashboard
  - [ ] Verify build completes successfully without errors
  - [ ] Check deployment status shows "Ready"
  - [ ] Access deployed URL and verify site loads correctly
  - [ ] Test that site matches local development version

- [ ] Configure environment variables (AC: 7)
  - [ ] Navigate to Project Settings > Environment Variables
  - [ ] Note: No environment variables needed for initial deployment
  - [ ] Document placeholder for future variables (e.g., RESEND_API_KEY for Story 4.x)
  - [ ] Verify .env.local is in .gitignore (from Story 1.2)

- [ ] Verify deployment pipeline functionality
  - [ ] Make a small change to homepage (e.g., update text)
  - [ ] Commit and push to main branch
  - [ ] Verify Vercel automatically detects push and triggers deployment
  - [ ] Confirm new deployment completes and goes live
  - [ ] Test preview deployment: Create feature branch, push, verify preview URL generated

## Dev Notes

### Previous Story Insights
[From Story 1.1 & 1.2]
- Next.js 14+ project with TypeScript and Tailwind CSS configured
- GitHub repository created with initial commit pushed
- Project structure: /app, /components, /lib, /public
- README.md documented with setup instructions

### Deployment Architecture Requirements
[Source: [deployment-architecture.md#deployment-strategy](docs/architecture/deployment-architecture.md)]

**Platform:**
- Vercel for frontend and backend (API routes) deployment
- Build Command: `npm run build`
- Output Directory: `.next` (auto-detected by Vercel)
- Runtime: Node.js 20.x

**Deployment Triggers:**
- Production: Push to `main` branch → production domain
- Preview: Push to any other branch/PR → unique preview URL
- Automatic deployment on git push (zero-config)

**Rendering Strategy:**
- Static Site Generation (SSG) - pages pre-rendered at build time
- Vercel Edge Network: 300+ locations globally for CDN

### Environment Configuration
[Source: [deployment-architecture.md#environments](docs/architecture/deployment-architecture.md)]

**Environment URLs:**
- Development: http://localhost:3000
- Preview: https://personal-portfolio-{hash}.vercel.app
- Production: Custom domain or https://<project-name>.vercel.app

**Environment Variables:**
- Development: .env.local (git-ignored)
- Preview/Production: Configured in Vercel dashboard
- None required for initial deployment (will add RESEND_API_KEY in Epic 4)

### Vercel Features Enabled

**Automatic by Vercel:**
- HTTPS/SSL certificates (free, automatic)
- CDN with 300+ edge locations
- Zero-downtime deployments
- Automatic rollback capability
- Preview URLs for every branch/PR
- Build caching for faster deployments

### File Locations

Based on project structure:
- Vercel configuration: Optional `vercel.json` in root (not required for basic setup)
- Build output: `.next/` directory (git-ignored, generated during build)
- Environment variables: Vercel dashboard (not in repository)

### Testing

[Source: [testing-strategy.md](docs/architecture/testing-strategy.md)]

**Testing Requirements for this Story:**
- Manual verification of deployment pipeline:
  - Build succeeds in Vercel dashboard
  - Production URL is accessible and loads correctly
  - HTTPS is enabled (green padlock in browser)
  - Preview deployment works for feature branches
- Future: CI/CD pipeline with GitHub Actions (Epic 5)

### Technical Constraints

**Vercel Free Tier Limits:**
- 100 GB bandwidth per month
- Unlimited projects and deployments
- 6,000 build minutes per month
- Sufficient for portfolio website traffic

**Build Time:**
- First build may take 2-3 minutes
- Subsequent builds faster due to caching
- Turbopack and SWC provide optimized build performance

### Deployment Best Practices

**From Architecture:**
1. Always test locally before pushing to main
2. Use feature branches for new development
3. Review preview deployments before merging to main
4. Monitor build logs for any warnings or errors
5. Keep environment variables secure in Vercel dashboard

### Integration with Future Stories

This deployment pipeline enables:
- Continuous deployment for all future feature development
- Preview URLs for testing before production release
- Automatic SSL and CDN for performance (Epic 5)
- Integration point for CI/CD pipeline with GitHub Actions (Epic 5)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-02 | 1.0 | Initial story draft created | Scrum Master (Bob) |

## Dev Agent Record

*This section will be populated by the development agent during implementation*

### Agent Model Used

*To be filled by Dev Agent*

### Debug Log References

*To be filled by Dev Agent*

### Completion Notes List

*To be filled by Dev Agent*

### File List

*To be filled by Dev Agent*

## QA Results

*This section will be populated by QA Agent after story completion*
